!function(i,t){"use strict";function e(i,t){return i.replace(/\{([^}]+)\}/g,function(i,e){return t[e]||""})}function n(){if(!b){y=i('<div class="'+_+'__mask">').hide().appendTo("body");var t=i('<div class="'+_+'" style="max-height:0;height:auto;"><p class="'+_+'__main" style="height:100px;color:red"></p></div>').appendTo("body");m="fixed"===t.css("position"),$=t.css("display").indexOf("flex")>-1,w=t.offset().left<u.width()/2,x=0===t.find("."+_+"__main").height(),t.remove(),b=!0}}function o(){var i=v.slice(-1)[0];return i?i.$dialog.is(":visible")?i:(v.pop(),o()):(l(),null)}function s(t){var e=o();if(e){var n=e.$dialog[0],s=t.target;s===n||i.contains(n,s)||e._focus(!0)}}function a(i){return i.find("a[href],input,select,textarea,button,object,[tabindex]").not(":disabled").filter(":visible")}function c(){p||(i(document).on("keydown."+_,function(i){if(!i.isDefaultPrevented()&&27===i.keyCode){i.preventDefault();var t=o();if(!t)return;t.close()}}),i("body").on("focusin."+_,function(i){setTimeout(function(){s(i)},0)}),p=!0)}function d(){i("body").add(document).off("."+_),p=!1}function r(i){var t=v.indexOf(i);-1!==t&&v.splice(t,1),v.push(i),c(),h(),y.show()}function l(i){var t=v.indexOf(i);t>-1&&v.splice(t,1),v.length||(y.hide(),d())}function h(){var i=0;v.forEach(function(t){var e=t.$dialog;i||(e.css("z-index",""),i=e.css("z-index")||1),e.css("z-index",++i)})}function f(i){return this instanceof f?(n(),this._id=++g,this.returnValue="",void this._create(i)):new f(i)}var u=i(t),_="dialog",v=[],g=0,p=!1,b=!1,y=null,m=!0,$=!0,w=!1,x=!0,k={show:function(){this.$dialog.show(),this._position(),this.openedBy=document.activeElement,this._focus(),u.on("resize."+_+":"+this._id,this._position.bind(this))},showModal:function(){r(this),this.show()},close:function(t){var e=this.$dialog;if(e.is(":visible")){this.returnValue=String(t),e.hide(),l(this),u.off("resize."+_+":"+this._id),this.openedBy&&this.openedBy.focus();var n=i.Event("close");e.trigger(n)}},destroy:function(){this.close(),this.$dialog.remove()},on:function(){var i=this.$dialog;return i.on.apply(i,arguments),this},_create:function(t){t=t||{};var n=[_,t.className||"",m?"":_+"--absolute"].join(" "),o=e('<div class="{className}" role="{role}" aria-labelledby="{ns}-{count}-label" aria-describedby="{ns}-{count}-main" tabindex="-1">\n\n	<header class="{ns}__header">\n		<h2 id="{ns}-{count}-label" class="{ns}__title">{title}</h2>\n		<button class="dialog__close" type="button" data-action="close"><i aria-hidden="true" class="dialog__close-icon"></i>Close</button>\n	</header>\n\n	<div class="{ns}__main" id="{ns}-{count}-main"></div>\n\n	<footer class="{ns}__footer"></footer>\n\n</div>',{title:t.title||"",className:n,ns:_,count:this._id,role:t.role||"dialog"}),s=i(o).hide().appendTo("body").on("keydown",this._keydown.bind(this)).on("click","[data-action=close]",this.close.bind(this));this.$content=s.find("."+_+"__main").append(t.content),this.$footer=s.find("."+_+"__footer").append(t.footer),this.$footer=s.find("."+_+"__title"),this.$dialog=s,t.destroyOnClose&&this.on("close",this.destroy.bind(this))},_position:function(){var i=this.$dialog;if(!$||!x){var t=this.$content;i.css("height",""),t.css("height","");var e=i.height(),n=i.find("."+_+"__header").outerHeight()||0,o=this.$footer.outerHeight()||0;t.height(e-n-o)}!w&&m&&i.css({marginLeft:-i.width()/2,marginTop:-i.height()/2})},_focus:function(t){var e,n=this.$dialog,o=a(n);if(t)e=o[0]||n;else{var s=n.find("."+_+"__close")[0];o=o.not(s);var c=o.filter("[autofocus]");e=c[0]||o[0]||s||n}i(e).focus()},_keydown:function(i){if(9===i.which){var t=i.target,e=a(this.$dialog);e.last().is(t)&&!i.shiftKey?(i.preventDefault(),e.eq(0).focus()):e.eq(0).is(t)&&i.shiftKey&&(i.preventDefault(),e.last().focus())}}};for(var z in k)f.prototype[z]=k[z];i.Dialog=f}(jQuery,window);
//# sourceMappingURL=jquery.dialog.min.js.map