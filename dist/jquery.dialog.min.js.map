{"version":3,"sources":["jquery.dialog.js"],"names":["$","window","templater","str","data","replace","m","name","setup","isSetup","$mask","namespace","hide","appendTo","$test","supportsFixed","css","supportsFlexBox","indexOf","supportsTransform","offset","left","$window","width","supportsResizingScrollableChildren","find","height","remove","getTopModalDialog","dialog","stack","slice","$dialog","is","pop","hideModal","checkFocus","e","el","target","contains","_focus","getFocusable","$el","not","filter","setupGlobalEvents","hasGlobalEvents","document","on","isDefaultPrevented","keyCode","preventDefault","close","setTimeout","removeGlobalEvents","add","off","showModal","index","splice","push","zIndex","show","length","topIndex","forEach","item","i","parseInt","Dialog","options","this","_id","counter","returnValue","_create","proto","_position","openedBy","activeElement","bind","ret","String","focus","event","Event","trigger","destroy","apply","arguments","className","join","html","title","ns","count","role","_keydown","$content","append","content","$footer","footer","destroyOnClose","headerHeight","outerHeight","footerHeight","marginLeft","marginTop","inTabbingOrder","focusOn","$focusable","$autofocus","which","last","shiftKey","eq","prototype","jQuery"],"mappings":"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","file":"jquery.dialog.min.js","sourcesContent":["/* jshint undef:true, jquery:true, browser: true */\r\n\r\n/**\r\n *\tjQuery plugin to create a dialog\r\n *\r\n *\tThis supports modal and none modal dialogs\r\n *\tDialogs are stacked in creation order or modal order\r\n *\t\r\n *\tDialogs are not moveable or resizable\t\r\n *\r\n *\t@requires jQuery\r\n *\t@requires Function.prototype.bind\r\n *\t@requires Array.prototype.forEach\r\n *\t@requires Array.prototype.indexOf\r\n */\r\n( function( $, window ) {\r\n\r\n\t\"use strict\";\r\n\r\n\tvar $window = $(window);\r\n\r\n\t// Change this to change the CSS and event namespace\r\n\tvar namespace = 'dialog';\r\n\r\n\t// Ordering stack for modal dialogs\r\n\tvar stack = [];\r\n\t// Counter for generating IDs\r\n\tvar counter = 0;\r\n\t// Are the global keypress and click events setup\r\n\tvar hasGlobalEvents = false;\r\n\t// Has the browser been setup and tested\r\n\tvar isSetup = false;\r\n\t// Reference to the mask\r\n\tvar $mask = null;\r\n\r\n\tvar supportsFixed = true;\r\n\tvar supportsFlexBox = true;\r\n\tvar supportsTransform = false;\r\n\tvar supportsResizingScrollableChildren = true;\r\n\r\n\t// Not entirely efficent micro templater\r\n\t// Replaces '{name}' with the value from data\r\n\tfunction templater( str, data ){\t\r\n\t\treturn str.replace( /\\{([^}]+)\\}/g, function( m, name ) {\r\n\t\t\treturn data[name] || '';\r\n\t\t} );\r\n\t}\r\n\r\n\t// Inital setup.  Create the mask and run any feature tests\r\n\tfunction setup() {\r\n\r\n\t\tif ( isSetup ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t$mask = $('<div class=\"' + namespace + '__mask\">')\r\n\t\t\t.hide()\r\n\t\t\t.appendTo('body');\r\n\r\n\t\tvar $test = $('<div class=\"' + namespace + '\" style=\"max-height:0;height:auto;\"><p class=\"' + namespace + '__main\" style=\"height:100px;color:red;padding:0;border:0;\"></p></div>').appendTo('body');\r\n\t\tsupportsFixed = $test.css('position') === 'fixed';\r\n\t\tsupportsFlexBox = $test.css('display').indexOf('flex') > -1;\r\n\r\n\t\t// If transform fails to work the dialog should be just right of the center\r\n\t\t// Use + 1 to avoid rounding errors\r\n\t\t// If it works it should be centered and the edge will be left of the center\r\n\t\tsupportsTransform = $test.offset().left + 1 < $window.width()/2;\r\n\r\n\t\t// In IE, if the container contains a child with \"overflow-y: auto\",\r\n\t\t// it will not shrink that child and it overflows out\r\n\t\t// This is partly fixed in IE11, where this only happens if the the container\r\n\t\t// has no explict height\r\n\t\tsupportsResizingScrollableChildren = $test.find( '.' + namespace + '__main' ).height() === 0;\r\n\t\t$test.remove();\r\n\t\tisSetup = true;\r\n\t}\r\n\r\n\t/**\r\n\t * Find the top modal dialog and recover from a missing dialog\r\n\t */\r\n\tfunction getTopModalDialog() {\r\n\t\tvar dialog = stack.slice(-1)[0];\r\n\t\tif ( !dialog ) {\r\n\t\t\t// Something has gone wrong - recover gracefully\r\n\t\t\thideModal();\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tif ( !dialog.$dialog.is(':visible') ) {\r\n\t\t\t// Again, this shouldn't happen, ignore this one and get the next\r\n\t\t\tstack.pop();\r\n\t\t\treturn getTopModalDialog();\r\n\t\t}\r\n\r\n\t\treturn dialog;\r\n\t}\r\n\r\n\t/**\r\n\t *\tCheck if the top dialog contains the focus and if it does't\r\n\t *\tforce it to.\r\n\t */\r\n\tfunction checkFocus(e) {\r\n\r\n\t\tvar dialog = getTopModalDialog();\r\n\t\tif ( !dialog ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar el = dialog.$dialog[0];\r\n\t\tvar target = e.target;\r\n\r\n\t\tif ( target !== el && !$.contains( el, target ) ) {\r\n\t\t\tdialog._focus(true);\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// Find all focusable elements in $el\r\n\t// Including imagemaps is left as an exercise for the reader\r\n\tfunction getFocusable($el) {\r\n\r\n\t\treturn $el\r\n\t\t\t.find( 'a[href],input,select,textarea,button,object,[tabindex]')\r\n\t\t\t.not(':disabled')\r\n\t\t\t.filter(':visible');\r\n\r\n\t}\r\n\r\n\t// Setup events to run if there is a modal dialog\r\n\tfunction setupGlobalEvents() {\r\n\r\n\t\tif ( hasGlobalEvents ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Needs to be document for IE8\r\n\t\t$(document)\r\n\t\t\t.on( 'keydown.' + namespace, function(e) {\r\n\t\t\t\t// Close the top dialog using the escape key\r\n\t\t\t\tif \t( !e.isDefaultPrevented() && e.keyCode === 27 ) {\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\tvar dialog = getTopModalDialog();\r\n\t\t\t\t\tif ( !dialog ) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdialog.close();\r\n\t\t\t\t}\r\n\t\t\t} );\r\n\r\n\t\t$('body')\r\n\t\t\t.on( 'focusin.' + namespace, function(e) {\r\n\t\t\t\t// Keep the focus in the top dialog\r\n\t\t\t\t// All sorts of problems happen if you don't do this on a timeout\r\n\t\t\t\tsetTimeout( function() {\r\n\t\t\t\t\tcheckFocus(e);\r\n\t\t\t\t}, 0 );\r\n\t\t\t} );\r\n\r\n\t\thasGlobalEvents = true;\r\n\r\n\t}\r\n\r\n\t// Remove the global events\r\n\tfunction removeGlobalEvents() {\r\n\t\t$('body').add(document).off( '.' + namespace );\r\n\t\thasGlobalEvents = false;\r\n\t}\r\n\r\n\t// Does global stuff for showing a dialog\r\n\tfunction showModal(dialog) {\r\n\r\n\t\t// Remove the dialog from the stack if present\r\n\t\tvar index = stack.indexOf(dialog);\r\n\t\tif ( index !== -1 ) {\r\n\t\t\tstack.splice( index, 1 );\r\n\t\t}\r\n\r\n\t\t// Add to the top of the stack\r\n\t\tstack.push(dialog);\r\n\t\tsetupGlobalEvents();\r\n\t\tzIndex();\r\n\t\t$mask.show();\r\n\r\n\t}\r\n\r\n\t// Hide a modeal dialog\r\n\tfunction hideModal(dialog) {\r\n\t\t\r\n\t\tvar index = stack.indexOf(dialog);\r\n\t\tif ( index > -1 ) {\t\t\r\n\t\t\tstack.splice( index, 1 );\r\n\t\t}\r\n\t\tif ( !stack.length ) {\r\n\t\t\t$mask.hide();\r\n\t\t\tremoveGlobalEvents();\t\r\n\t\t} else {\r\n\t\t\tzIndex();\r\n\t\t}\r\n\t}\r\n\r\n\t// Set the z-indexes on the dialogs\r\n\tfunction zIndex() {\r\n\r\n\t\tvar index = 0;\r\n\t\tvar topIndex = stack.length - 1;\r\n\t\tstack.forEach( function(item,i) {\r\n\t\t\tvar $dialog = item.$dialog;\r\n\t\t\tif ( !index ) {\r\n\t\t\t\t// Reset the z index\r\n\t\t\t\t$dialog.css( 'z-index', '' );\r\n\t\t\t\t// Get the default\r\n\t\t\t\tindex = parseInt( $dialog.css( 'z-index' ), 10 ) || 1;\r\n\t\t\t}\r\n\t\t\t// Add the index\r\n\t\t\tif ( i === topIndex ) {\r\n\t\t\t\t$mask.css( 'z-index', ++index );\r\n\t\t\t}\r\n\r\n\t\t\t$dialog.css( 'z-index', ++index );\r\n\t\t} );\r\n\t}\r\n\r\n\t/**\r\n\t *\tCreate a new dialogue and appends it to the document\r\n\t *\t@param {Object} options\r\n\t *\t@param {String} [options.title]\r\n\t *\t@param {Boolean} [options.content]\r\n\t *\t@param {Boolean} [options.footer]\r\n\t *\t@param {Boolean} [options.className]\r\n\t *\t@param {Boolean} [options.destroyOnClose]\r\n\t */\r\n\tfunction Dialog(options) {\r\n\r\n\t\tif ( !(this instanceof Dialog) ) {\r\n\t\t\treturn new Dialog(options);\r\n\t\t}\r\n\r\n\t\tsetup();\r\n\t\tthis._id = ++counter;\r\n\t\tthis.returnValue = '';\r\n\r\n\t\tthis._create(options);\r\n\r\n\t}\r\n\r\n\tvar proto = {\r\n\r\n\t\t/**\r\n\t\t *\tShow the dialog\r\n\t\t */\r\n\t\tshow: function() {\r\n\t\t\t\r\n\t\t\tthis.$dialog.show();\r\n\t\t\tthis._position();\r\n\t\t\tthis.openedBy = document.activeElement;\r\n\t\t\tthis._focus();\r\n\t\t\t$window.on( 'resize.' + namespace + ':' + this._id, this._position.bind(this) );\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t *\tShow the dialog as a modal dialog\r\n\t\t */\r\n\t\tshowModal: function() {\r\n\t\t\t\r\n\t\t\tshowModal(this);\r\n\t\t\tthis.show();\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t *\tClose the dialog\r\n\t\t */\r\n\t\tclose: function(ret) {\r\n\r\n\t\t\tvar $dialog = this.$dialog;\r\n\r\n\t\t\tif ( !$dialog.is(':visible') ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthis.returnValue = String(ret);\r\n\t\t\t$dialog.hide();\r\n\t\t\thideModal(this);\r\n\r\n\t\t\t$window.off( 'resize.' + namespace + ':' + this._id );\r\n\r\n\t\t\t// Return focus to the openning element\r\n\t\t\tif ( this.openedBy ) {\r\n\t\t\t\tthis.openedBy.focus();\r\n\t\t\t}\r\n\r\n\t\t\tvar event = $.Event('close');\r\n\t\t\t$dialog.trigger(event);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t *\tDestroy a dialog.  Completely remove it from the DOM\r\n\t\t */\r\n\t\tdestroy: function() {\r\n\t\t\tthis.close();\r\n\t\t\tthis.$dialog.remove();\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t *\tAdds an event to the dialog\telement\r\n\t\t */\r\n\t\ton: function() {\r\n\t\t\tvar $dialog = this.$dialog;\r\n\t\t\t$dialog.on.apply( $dialog, arguments );\r\n\t\t\treturn this;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t *\tCreate the dialog\r\n\t\t */\r\n\t\t_create: function(options) {\r\n\r\n\t\t\toptions = options || {};\r\n\t\t\tvar className = [\r\n\t\t\t\tnamespace,\r\n\t\t\t\toptions.className || '',\r\n\t\t\t\tsupportsFixed ? '' : namespace + '--absolute' \r\n\t\t\t].join(' ');\r\n\r\n\t\t\tvar html = templater( (\"<div class=\\\"{className}\\\" role=\\\"{role}\\\" aria-labelledby=\\\"{ns}-{count}-label\\\" aria-describedby=\\\"{ns}-{count}-main\\\" tabindex=\\\"-1\\\">\\r\\n\\r\\n\\t<header class=\\\"{ns}__header\\\">\\r\\n\\t\\t<h2 id=\\\"{ns}-{count}-label\\\" class=\\\"{ns}__title\\\">{title}</h2>\\r\\n\\t\\t<button class=\\\"dialog__close\\\" type=\\\"button\\\" data-action=\\\"close\\\"><i aria-hidden=\\\"true\\\" class=\\\"dialog__close-icon\\\"></i><span class=\\\"dialog__close-text\\\">Close</span></button>\\r\\n\\t</header>\\r\\n\\r\\n\\t<div class=\\\"{ns}__main\\\" id=\\\"{ns}-{count}-main\\\"></div>\\r\\n\\r\\n\\t<footer class=\\\"{ns}__footer\\\"></footer>\\r\\n\\r\\n</div>\"), {\r\n\t\t\t\ttitle: options.title || '',\r\n\t\t\t\tclassName: className,\r\n\t\t\t\tns: namespace,\r\n\t\t\t\tcount: this._id,\r\n\t\t\t\trole: options.role || 'dialog'\r\n\t\t\t} );\r\n\r\n\t\t\tvar $dialog = $(html)\r\n\t\t\t\t.hide()\r\n\t\t\t\t.appendTo('body')\r\n\t\t\t\t.on( 'keydown', this._keydown.bind(this) )\r\n\t\t\t\t.on( 'click', '[data-action=close]', this.close.bind(this) );\r\n\r\n\t\t\tthis.$content = $dialog.find( '.' + namespace + '__main' )\r\n\t\t\t\t.append(options.content);\r\n\t\t\tthis.$footer = $dialog.find( '.' + namespace + '__footer' )\r\n\t\t\t\t.append(options.footer);\r\n\t\t\tthis.$footer = $dialog.find( '.' + namespace + '__title' );\r\n\r\n\t\t\tthis.$dialog = $dialog;\r\n\r\n\t\t\tif ( options.destroyOnClose ) {\r\n\t\t\t\tthis.on( 'close', this.destroy.bind(this) );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t *\tPosition the dialog centrally\r\n\t\t *\tThis is almost all done with CSS, but some older browsers\r\n\t\t *\tand IE need a bit of JS to help them.\r\n\t\t */\r\n\t\t_position: function() {\r\n\r\n\t\t\tvar $dialog = this.$dialog;\r\n\r\n\t\t\tif ( !supportsFlexBox || !supportsResizingScrollableChildren ) {\r\n\t\t\t\t// All of IE\r\n\t\t\t\tvar $content = this.$content;\r\n\t\t\t\t$dialog.css( 'height', '' );\r\n\t\t\t\t$content.css( 'height', '' );\r\n\t\t\t\tvar height = $dialog.height();\r\n\t\t\t\t\r\n\t\t\t\tvar headerHeight = $dialog.find( '.' + namespace + '__header' ).outerHeight() || 0;\r\n\t\t\t\tvar footerHeight = this.$footer.outerHeight() || 0;\r\n\t\t\t\t$content.height( height - headerHeight - footerHeight );\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif ( !supportsTransform && supportsFixed ) {\r\n\t\t\t\t// IE < 9\r\n\t\t\t\t$dialog.css( {\r\n\t\t\t\t\tmarginLeft: -$dialog.width()/2,\r\n\t\t\t\t\tmarginTop: -$dialog.height()/2\r\n\t\t\t\t} );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t *\tSet the focus.  If inTabbingOrder it will be set to first focusable element\r\n\t\t *\r\n\t\t *\tOtherwise it is set to:\r\n\t\t *  * the first focusable element in .dialog__main or below with an autofocus attribute\r\n\t\t *  * the first focusable element in .dialog__main or below\r\n\t\t *\t* the close cross\r\n\t\t *\t* the dialog\r\n \t\t *\t\r\n\t\t *\t@param {Boolean} [inTabbingOrder=false] If true focus in strict tabbing order\r\n\t\t */\r\n\t\t_focus: function( inTabbingOrder ) {\r\n\r\n\t\t\tvar $dialog = this.$dialog;\r\n\t\t\tvar focusOn;\r\n\r\n\t\t\tvar $focusable = getFocusable($dialog);\r\n\r\n\t\t\tif ( inTabbingOrder ) {\r\n\t\t\t\tfocusOn = $focusable[0] || $dialog;\r\n\t\t\t} else {\r\n\t\t\t\tvar close = $dialog.find( '.' + namespace + '__close' )[0];\r\n\r\n\t\t\t\t$focusable = $focusable.not(close);\r\n\t\t\t\tvar $autofocus = $focusable.filter('[autofocus]');\r\n\r\n\t\t\t\tfocusOn = $autofocus[0] ||\r\n\t\t\t\t\t$focusable[0] ||\r\n\t\t\t\t\tclose ||\r\n\t\t\t\t\t$dialog;\r\n\t\t\t}\r\n\r\n\t\t\t$(focusOn).focus();\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t *\tLoop the focus round them tabbing\r\n\t\t *\r\n\t\t */\r\n\t\t_keydown: function(e) {\r\n\t\t\tif ( e.which !== 9 ) {\r\n\t\t\t\treturn;\r\n\t\t\t} \r\n\t\t\tvar target = e.target;\r\n\r\n\t\t\tvar $focusable = getFocusable(this.$dialog);\r\n\t\t\tif ( $focusable.last().is(target) && !e.shiftKey ) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\t$focusable.eq(0).focus();\r\n\t\t\t} else if ( $focusable.eq(0).is(target) && e.shiftKey ) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\t$focusable.last().focus();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t};\r\n\r\n\t// For the benefit of IE8.  Would prefer to use Object.create\r\n\tfor ( var i in proto ) {\r\n\t\tDialog.prototype[i] = proto[i];\r\n\t}\r\n\r\n\t$.Dialog = Dialog;\r\n\r\n\t\r\n}( jQuery, window ) );"],"sourceRoot":"/source/"}