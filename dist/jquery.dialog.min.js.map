{"version":3,"sources":["jquery.dialog.js"],"names":["$","window","templater","str","data","replace","m","name","setup","isSetup","$mask","namespace","hide","appendTo","$test","supportsFixed","css","supportsFlexBox","indexOf","supportsTransform","offset","left","$window","width","remove","getTopModalDialog","dialog","stack","slice","$dialog","is","pop","hideModal","checkFocus","e","el","target","contains","_focus","getFocusable","$el","find","not","filter","setupGlobalEvents","hasGlobalEvents","document","on","isDefaultPrevented","keyCode","preventDefault","close","setTimeout","removeGlobalEvents","add","off","showModal","index","splice","push","zIndex","show","length","forEach","item","Dialog","options","this","_id","counter","returnValue","_create","proto","_position","openedBy","activeElement","bind","ret","String","focus","event","Event","trigger","destroy","apply","arguments","className","join","html","title","ns","count","role","_keydown","$content","append","content","$footer","footer","destroyOnClose","height","headerHeight","outerHeight","footerHeight","marginLeft","marginTop","inTabbingOrder","focusOn","$focusable","$autofocus","which","last","shiftKey","eq","i","prototype","jQuery"],"mappings":"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","file":"jquery.dialog.min.js","sourcesContent":["/* jshint undef:true, jquery:true, browser: true */\n\n/**\n *\tjQuery plugin to create a dialog\n *\n *\tThis supports modal and none modal dialogs\n *\tDialogs are stacked in creation order or modal order\n *\t\n *\tDialogs are not moveable or resizable\t\n *\n *\t@requires jQuery\n *\t@requires Function.prototype.bind\n *\t@requires Array.prototype.forEach\n *\t@requires Array.prototype.indexOf\n */\n( function( $, window ) {\n\n\t\"use strict\";\n\n\tvar $window = $(window);\n\n\t// Change this to change the CSS and event namespace\n\tvar namespace = 'dialog';\n\n\t// Ordering stack for modal dialogs\n\tvar stack = [];\n\t// Counter for generating IDs\n\tvar counter = 0;\n\t// Are the global keypress and click events setup\n\tvar hasGlobalEvents = false;\n\t// Has the browser been setup and tested\n\tvar isSetup = false;\n\t// Reference to the mask\n\tvar $mask = null;\n\n\tvar supportsFixed = true;\n\tvar supportsFlexBox = true;\n\tvar supportsTransform = false;\n\n\t// Not entirely efficent micro templater\n\t// Replaces '{name}' with the value from data\n\tfunction templater( str, data ){\t\n\t\treturn str.replace( /\\{([^}]+)\\}/g, function( m, name ) {\n\t\t\treturn data[name] || '';\n\t\t} );\n\t}\n\n\t// Inital setup.  Create the mask and run any feature tests\n\tfunction setup() {\n\n\t\tif ( isSetup ) {\n\t\t\treturn;\n\t\t}\n\n\t\t$mask = $('<div class=\"' + namespace + '__mask\">')\n\t\t\t.hide()\n\t\t\t.appendTo('body');\n\n\t\tvar $test = $('<p class=\"' + namespace + '\"/>').appendTo('body');\n\t\tsupportsFixed = $test.css('position') === 'fixed';\n\t\tsupportsFlexBox = $test.css('display').indexOf('flex') > -1;\n\t\tsupportsTransform = $test.offset().left < $window.width()/2;\n\t\t$test.remove();\n\t\tisSetup = true;\n\t}\n\n\t/**\n\t * Find the top modal dialog and recover from a missing dialog\n\t */\n\tfunction getTopModalDialog() {\n\t\tvar dialog = stack.slice(-1)[0];\n\t\tif ( !dialog ) {\n\t\t\t// Something has gone wrong - recover gracefully\n\t\t\thideModal();\n\t\t\treturn null;\n\t\t}\n\t\tif ( !dialog.$dialog.is(':visible') ) {\n\t\t\t// Again, this shouldn't happen, ignore this one and get the next\n\t\t\tstack.pop();\n\t\t\treturn getTopModalDialog();\n\t\t}\n\n\t\treturn dialog;\n\t}\n\n\t/**\n\t *\tCheck if the top dialog contains the focus and if it does't\n\t *\tforce it to.\n\t */\n\tfunction checkFocus(e) {\n\n\t\tvar dialog = getTopModalDialog();\n\t\tif ( !dialog ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar el = dialog.$dialog[0];\n\t\tvar target = e.target;\n\n\t\tif ( target !== el && !$.contains( el, target ) ) {\n\t\t\tdialog._focus(true);\n\t\t}\n\n\t}\n\n\t// Find all focusable elements in $el\n\t// Including imagemaps is left as an exercise for the reader\n\tfunction getFocusable($el) {\n\n\t\treturn $el\n\t\t\t.find( 'a[href],input,select,textarea,button,object,[tabindex]')\n\t\t\t.not(':disabled')\n\t\t\t.filter(':visible');\n\n\t}\n\n\t// Setup events to run if there is a modal dialog\n\tfunction setupGlobalEvents() {\n\n\t\tif ( hasGlobalEvents ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Needs to be document for IE8\n\t\t$(document)\n\t\t\t.on( 'keydown.' + namespace, function(e) {\n\t\t\t\t// Close the top dialog using the escape key\n\t\t\t\tif \t( !e.isDefaultPrevented() && e.keyCode === 27 ) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tvar dialog = getTopModalDialog();\n\t\t\t\t\tif ( !dialog ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tdialog.close();\n\t\t\t\t}\n\t\t\t} );\n\n\t\t$('body')\n\t\t\t.on( 'focusin.' + namespace, function(e) {\n\t\t\t\t// Keep the focus in the top dialog\n\t\t\t\t// All sorts of problems happen if you don't do this on a timeout\n\t\t\t\tsetTimeout( function() {\n\t\t\t\t\tcheckFocus(e);\n\t\t\t\t}, 0 );\n\t\t\t} );\n\n\t\thasGlobalEvents = true;\n\n\t}\n\n\t// Remove the global events\n\tfunction removeGlobalEvents() {\n\t\t$('body').add(document).off( '.' + namespace );\n\t\thasGlobalEvents = false;\n\t}\n\n\t// Does global stuff for showing a dialog\n\tfunction showModal(dialog) {\n\n\t\t// Remove the dialog from the stack if present\n\t\tvar index = stack.indexOf(dialog);\n\t\tif ( index !== -1 ) {\n\t\t\tstack.splice( index, 1 );\n\t\t}\n\n\t\t// Add to the top of the stack\n\t\tstack.push(dialog);\n\t\tsetupGlobalEvents();\n\t\tzIndex();\n\t\t$mask.show();\n\n\t}\n\n\t// Hide a modeal dialog\n\tfunction hideModal(dialog) {\n\t\t\n\t\tvar index = stack.indexOf(dialog);\n\t\tif ( index > -1 ) {\t\t\n\t\t\tstack.splice( index, 1 );\n\t\t}\n\t\tif ( !stack.length ) {\n\t\t\t$mask.hide();\n\t\t\tremoveGlobalEvents();\n\t\t}\n\t}\n\n\t// Set the z-indexes on the dialogs\n\tfunction zIndex() {\n\n\t\tvar index = 0;\n\t\tstack.forEach( function(item) {\n\t\t\tvar $dialog = item.$dialog;\n\t\t\tif ( !index ) {\n\t\t\t\t// Reset the z index\n\t\t\t\t$dialog.css( 'z-index', '' );\n\t\t\t\t// Get the default\n\t\t\t\tindex = $dialog.css( 'z-index' ) || 1;\n\t\t\t}\n\t\t\t// Add the index\n\t\t\t$dialog.css( 'z-index', ++index );\n\t\t} );\n\t}\n\n\t/**\n\t *\tCreate a new dialogue and appends it to the document\n\t *\t@param {Object} options\n\t *\t@param {String} [options.title]\n\t *\t@param {Boolean} [options.content]\n\t *\t@param {Boolean} [options.footer]\n\t *\t@param {Boolean} [options.className]\n\t *\t@param {Boolean} [options.destroyOnClose]\n\t */\n\tfunction Dialog(options) {\n\n\t\tif ( !(this instanceof Dialog) ) {\n\t\t\treturn new Dialog(options);\n\t\t}\n\n\t\tsetup();\n\t\tthis._id = ++counter;\n\t\tthis.returnValue = '';\n\n\t\tthis._create(options);\n\n\t}\n\n\tvar proto = {\n\n\t\t/**\n\t\t *\tShow the dialog\n\t\t */\n\t\tshow: function() {\n\t\t\t\n\t\t\tthis.$dialog.show();\n\t\t\tthis._position();\n\t\t\tthis.openedBy = document.activeElement;\n\t\t\tthis._focus();\n\t\t\t$window.on( 'resize.' + namespace + ':' + this._id, this._position.bind(this) );\n\t\t},\n\n\t\t/**\n\t\t *\tShow the dialog as a modal dialog\n\t\t */\n\t\tshowModal: function() {\n\t\t\t\n\t\t\tshowModal(this);\n\t\t\tthis.show();\n\t\t},\n\n\t\t/**\n\t\t *\tClose the dialog\n\t\t */\n\t\tclose: function(ret) {\n\n\t\t\tvar $dialog = this.$dialog;\n\n\t\t\tif ( !$dialog.is(':visible') ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.returnValue = String(ret);\n\t\t\t$dialog.hide();\n\t\t\thideModal(this);\n\n\t\t\t$window.off( 'resize.' + namespace + ':' + this._id );\n\n\t\t\t// Return focus to the openning element\n\t\t\tif ( this.openedBy ) {\n\t\t\t\tthis.openedBy.focus();\n\t\t\t}\n\n\t\t\tvar event = $.Event('close');\n\t\t\t$dialog.trigger(event);\n\t\t},\n\n\t\t/**\n\t\t *\tDestroy a dialog.  Completely remove it from the DOM\n\t\t */\n\t\tdestroy: function() {\n\t\t\tthis.close();\n\t\t\tthis.$dialog.remove();\n\t\t},\n\n\t\t/**\n\t\t *\tAdds an event to the dialog\telement\n\t\t */\n\t\ton: function() {\n\t\t\tvar $dialog = this.$dialog;\n\t\t\t$dialog.on.apply( $dialog, arguments );\n\t\t\treturn this;\n\t\t},\n\n\t\t/**\n\t\t *\tCreate the dialog\n\t\t */\n\t\t_create: function(options) {\n\n\t\t\toptions = options || {};\n\t\t\tvar className = [\n\t\t\t\tnamespace,\n\t\t\t\toptions.className || '',\n\t\t\t\tsupportsFixed ? '' : namespace + '--absolute' \n\t\t\t].join(' ');\n\n\t\t\tvar html = templater( (\"<div class=\\\"{className}\\\" role=\\\"{role}\\\" aria-labelledby=\\\"{ns}-{count}-label\\\" aria-describedby=\\\"{ns}-{count}-main\\\" tabindex=\\\"-1\\\">\\n\\n\\t<header class=\\\"{ns}__header\\\">\\n\\t\\t<h2 id=\\\"{ns}-{count}-label\\\" class=\\\"{ns}__title\\\">{title}</h2>\\n\\t\\t<button class=\\\"dialog__close\\\" type=\\\"button\\\" data-action=\\\"close\\\"><i aria-hidden=\\\"true\\\" class=\\\"dialog__close-icon\\\"></i>Close</button>\\n\\t</header>\\n\\n\\t<div class=\\\"{ns}__main\\\" id=\\\"{ns}-{count}-main\\\"></div>\\n\\n\\t<footer class=\\\"{ns}__footer\\\"></footer>\\n\\n</div>\"), {\n\t\t\t\ttitle: options.title || '',\n\t\t\t\tclassName: className,\n\t\t\t\tns: namespace,\n\t\t\t\tcount: this._id,\n\t\t\t\trole: options.role || 'dialog'\n\t\t\t} );\n\n\t\t\tvar $dialog = $(html)\n\t\t\t\t.hide()\n\t\t\t\t.appendTo('body')\n\t\t\t\t.on( 'keydown', this._keydown.bind(this) )\n\t\t\t\t.on( 'click', '[data-action=close]', this.close.bind(this) );\n\n\t\t\tthis.$content = $dialog.find( '.' + namespace + '__main' )\n\t\t\t\t.append(options.content);\n\t\t\tthis.$footer = $dialog.find( '.' + namespace + '__footer' )\n\t\t\t\t.append(options.footer);\n\t\t\tthis.$footer = $dialog.find( '.' + namespace + '__title' );\n\n\t\t\tthis.$dialog = $dialog;\n\n\t\t\tif ( options.destroyOnClose ) {\n\t\t\t\tthis.on( 'close', this.destroy.bind(this) );\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t *\tPosition the dialog centrally\n\t\t *\tThis is almost all done with CSS, but some older browsers\n\t\t *\tand IE need a bit of JS to help them.\n\t\t */\n\t\t_position: function() {\n\n\t\t\tvar $dialog = this.$dialog;\n\t\t\tvar $content = this.$content;\n\t\t\tvar height;\n\n\t\t\t$dialog.css( 'height', '' );\n\n\t\t\theight = $dialog.height();\n\n\t\t\tif ( !supportsFlexBox ) {\n\t\t\t\t$content.css('height', '' );\t\n\t\t\t}\n\n\t\t\tif ( !supportsFlexBox ) {\n\t\t\t\t// Mostly just IE <= 9\n\t\t\t\tvar headerHeight = $dialog.find( '.' + namespace + '__header' ).outerHeight() || 0;\n\t\t\t\tvar footerHeight = $dialog.find( '.' + namespace + '__footer' ).outerHeight() || 0;\n\t\t\t\t$content.height( height - headerHeight - footerHeight );\n\t\t\t}\n\n\t\t\t\n\t\t\t// IE has a bug where it doesn't shrink the height of children\n\t\t\t// that can be shrunk when using max-height.\n\t\t\t// Setting an explict height fixes this\n\t\t\t// As this is difficult to detect, we'll do it for all browsers\n\t\t\t$dialog.css( 'height', height );\n\t\t\t\n\n\t\t\tif ( !supportsTransform && supportsFixed ) {\n\t\t\t\t// IE < 9\n\t\t\t\t$dialog.css( {\n\t\t\t\t\tmarginLeft: -$dialog.width()/2,\n\t\t\t\t\tmarginTop: -$dialog.height()/2\n\t\t\t\t} );\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t *\tSet the focus.  If inTabbingOrder it will be set to first focusable element\n\t\t *\n\t\t *\tOtherwise it is set to:\n\t\t *  * the first focusable element in .dialog__main or below with an autofocus attribute\n\t\t *  * the first focusable element in .dialog__main or below\n\t\t *\t* the close cross\n\t\t *\t* the dialog\n \t\t *\t\n\t\t *\t@param {Boolean} [inTabbingOrder=false] If true focus in strict tabbing order\n\t\t */\n\t\t_focus: function( inTabbingOrder ) {\n\n\t\t\tvar $dialog = this.$dialog;\n\t\t\tvar focusOn;\n\n\t\t\tvar $focusable = getFocusable($dialog);\n\n\t\t\tif ( inTabbingOrder ) {\n\t\t\t\tfocusOn = $focusable[0] || $dialog;\n\t\t\t} else {\n\t\t\t\tvar close = $dialog.find( '.' + namespace + '__close' )[0];\n\n\t\t\t\t$focusable = $focusable.not(close);\n\t\t\t\tvar $autofocus = $focusable.filter('[autofocus]');\n\n\t\t\t\tfocusOn = $autofocus[0] ||\n\t\t\t\t\t$focusable[0] ||\n\t\t\t\t\tclose ||\n\t\t\t\t\t$dialog;\n\t\t\t}\n\n\t\t\t$(focusOn).focus();\n\t\t},\n\n\t\t/**\n\t\t *\tLoop the focus round them tabbing\n\t\t *\n\t\t */\n\t\t_keydown: function(e) {\n\t\t\tif ( e.which !== 9 ) {\n\t\t\t\treturn;\n\t\t\t} \n\t\t\tvar target = e.target;\n\n\t\t\tvar $focusable = getFocusable(this.$dialog);\n\t\t\tif ( $focusable.last().is(target) && !e.shiftKey ) {\n\t\t\t\te.preventDefault();\n\t\t\t\t$focusable.eq(0).focus();\n\t\t\t} else if ( $focusable.eq(0).is(target) && e.shiftKey ) {\n\t\t\t\te.preventDefault();\n\t\t\t\t$focusable.last().focus();\n\t\t\t}\n\t\t}\n\n\n\t};\n\n\t// For the benefit of IE8.  Would prefer to use Object.create\n\tfor ( var i in proto ) {\n\t\tDialog.prototype[i] = proto[i];\n\t}\n\n\t$.Dialog = Dialog;\n\n\t\n}( jQuery, window ) );"],"sourceRoot":"/source/"}